#!/bin/bash

loadLayout () {
    # Set wallpaper
    feh --bg-scale $WALLPAPER&

    # Start polybar
    . $HOME/.config/polybar/launch.sh&

    #  ws-1
    i3-msg 'workspace 1; append_layout ~/.config/i3/layouts/ws-1.json'
    alacritty --title "w1t1" -e $SHELL -c 'status; $SHELL -i'&
    alacritty --title "w1t2" -e gotop -a -c solarized16-dark&

    #  ws-2
    firefox -P "main" --class="main" https://akomis.webo.family/index.php/apps/calendar/dayGridMonth/now https://www.youtube.com/feed/subscriptions https://www.reddit.com/&

    #  ws-3
    i3-msg 'workspace 3; append_layout ~/.config/i3/layouts/ws-3.json'
    vscodium&
    firefox -P "dev" --class="dev" https://github.com/akomis&
    alacritty --title "w3t1" -e $SHELL -c 'cd $CWP; $SHELL -i'&

    #  ws-4
    thunderbird&

    #  ws-5
    signal-desktop&

    # ws-6
    joplin-desktop&

    #  ws-9
    alacritty -e cava&

    #  ws-10
    spotify&
}

# Startup programs
protonmail-bridge --noninteractive&
picom -b --experimental-backend&
dunst -config ~/.config/dunst/dunstrc&
udiskie&
nextcloud --background&

# Device configuration
setxkbmap -model pc104 -layout us,gr -variant qwerty -option grp:win_space_toggle
liquidctl set fan speed 20 30 30 30 40 40 50 70 60 90 70 100

# Layout initialization
loadLayout && i3-msg 'workspace 1'
